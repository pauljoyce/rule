<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.clinical.dao.master.ZjTemPatMasterIndexMapper">
<select id="findZjTemPatMasterIndexByUniqueId"  resultType="com.clinical.model.master.TEM_PAT_MASTER_INDEX">
       SELECT * FROM TEM_PAT_MASTER_INDEX a inner join (select max(patient_id) as patient_id From TEM_PAT_MASTER_INDEX group by unique_id) b ON a.patient_id=b.patient_id   limit #{pageNo},#{pageSize}
</select>

       <select id="findOneZjTemPatMasterIndexByUniqueId"  resultType="com.clinical.model.master.TEM_PAT_MASTER_INDEX">
              SELECT * FROM TEM_PAT_MASTER_INDEX where unique_id={unique_id_lv1}
       </select>

<select id="findZjTemPatMasterIndexByIncr"  resultType="java.lang.String">
       select distinct(unique_id_lv2) FROM TEM_PAT_MASTER_INDEX where date(created_at) = date_sub(curdate(),interval 1 day) 
</select>

    <select id="countAllPerson" resultType="java.lang.Integer">
        select count(id) FROM TEM_PAT_MASTER_INDEX a inner join (select max(patient_id) as patient_id From TEM_PAT_MASTER_INDEX group by unique_id) b ON a.patient_id=b.patient_id
    </select>


    <select id="findAllUniqueidEveryDayIncr"  resultType="java.lang.String">
        select distinct(unique_id) FROM TEM_PAT_MASTER_INDEX
    </select>

</mapper>